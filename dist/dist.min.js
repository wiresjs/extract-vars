"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e,t){var r={},n=function(e,t,n){r[e]={d:t,f:n}},s=function e(n){var s=r[n];if(void 0===s)return t?require(n):(Exports.__npm__=Exports.__npm__||{},Exports.__npm__[n]);if(s.r)return s.r;s.r={};for(var i=[e,s.r],a=2;a<s.d.length;a++)i.push(e(s.d[a]));return s.f.apply(null,i),s.r};n("ParserState",["require","exports"],function(e,t){var r=function(){function e(){_classCallCheck(this,e),this.states=new Set}return _createClass(e,[{key:"set",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<arguments.length;n++){var s=arguments[n];this.states.has(s)||this.states.add(s)}}},{key:"clean",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<arguments.length;n++){var s=arguments[n];this.states.delete(s)}}},{key:"has",value:function(e){return this.states.has(e)}},{key:"once",value:function(e){var t=this.states.has(e);return t&&this.states.delete(e),t}},{key:"unset",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<arguments.length;n++){var s=arguments[n];this.states.delete(s)}}}]),e}();t.ParserState=r}),n("rules/TokenRule",["require","exports"],function(e,t){var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getTokens",value:function(){return[]}},{key:"belongs",value:function(e){var t=this.getTokens();return t.indexOf(e)>-1}},{key:"process",value:function(e,t){return!0}}]),e}();t.TokenRule=r}),n("States",["require","exports"],function(e,t){!function(e){e[e.PENDING_FOR_VARIABLE=0]="PENDING_FOR_VARIABLE",e[e.READY_FOR_CONSUMING=1]="READY_FOR_CONSUMING",e[e.CONSUMING_VARIABLE=2]="CONSUMING_VARIABLE",e[e.CANCEL_NEXT_TOKEN=3]="CANCEL_NEXT_TOKEN",e[e.CANCEL_PREV_TOKEN=4]="CANCEL_PREV_TOKEN",e[e.TOKEN_PERSISTED=5]="TOKEN_PERSISTED",e[e.STRING_CONSUMING=6]="STRING_CONSUMING",e[e.STRING_CONSUMED=7]="STRING_CONSUMED",e[e.EXPECT_ASSIGNING=8]="EXPECT_ASSIGNING",e[e.VARIABLE_DECLARATION_SET=9]="VARIABLE_DECLARATION_SET"}(t.States||(t.States={}));t.States}),n("rules/collection/ReserverdVariableDefinition",["require","exports","rules/TokenRule","States"],function(e,t,r,n){var s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTokens",value:function(){return["let","var","const"]}},{key:"process",value:function(e,t){return e.set(n.States.TOKEN_PERSISTED),e.set(n.States.CANCEL_NEXT_TOKEN),!1}}]),t}(r.TokenRule);t.ReserverdVariableDefinition=s}),n("rules/TokenRules",["require","exports"],function(e,t){var r=function(){function e(t,r){_classCallCheck(this,e),this.state=t,this.rules=r}return _createClass(e,[{key:"verify",value:function(e){var t=this,r=!0;return this.rules.forEach(function(n){n.belongs(e)&&(r=n.process(t.state,e))}),r}}]),e}();t.TokenRules=r}),n("rules/ValidCharacter",["require","exports"],function(e,t){var r="abcdefghijklmnopqrstuvwxyz",n=""+r+r.toUpperCase()+"$._[]1234567890",s=""+r+r.toUpperCase()+"$_",i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isValid",value:function(e){return n.indexOf(e)>-1}},{key:"validVariableStart",value:function(e){return s.indexOf(e)>-1}},{key:"isValidVariable",value:function(e){for(var t=0;t<e.length;t++)if(n.indexOf(e[t])<0)return!1;return!0}},{key:"hasStringQuotes",value:function(e){var t=["'",'"'];return t.indexOf(e)>-1}}]),e}();t.VariableCharacters=i}),n("Digger",["require","exports","rules/collection/ReserverdVariableDefinition","rules/TokenRules","rules/ValidCharacter","ParserState","States"],function(e,t,r,n,s,i,a){var o=function(){function e(){_classCallCheck(this,e),this.variables=[],this.state=new i.ParserState,this.ignoreNext=!1,this.rules=new n.TokenRules(this.state,[new r.ReserverdVariableDefinition]),this.state.set(a.States.PENDING_FOR_VARIABLE)}return _createClass(e,[{key:"consumeVariable",value:function(e){this.latest=this.latest||[],this.latest.push(e)}},{key:"cancelCurrentVariable",value:function(){this.latest=null,this.state.set(a.States.PENDING_FOR_VARIABLE),this.state.unset(a.States.CONSUMING_VARIABLE)}},{key:"cancelLatest",value:function(){this.state.has(a.States.TOKEN_PERSISTED)||this.variables.pop()}},{key:"accept",value:function(e){return this.rules.verify(e)}},{key:"consumeString",value:function(e){this.consumingString=e}},{key:"ignoreUntilNot",value:function(e){this.ignoredUntilNot=e}},{key:"finalizeVariable",value:function(){if(this.latest){var e=this.latest.join("");this.cancelCurrentVariable(),this.accept(e)&&(this.state.once(a.States.CANCEL_NEXT_TOKEN)||(s.VariableCharacters.validVariableStart(e[0])&&this.variables.push(e),this.state.unset(a.States.TOKEN_PERSISTED)))}}},{key:"receive",value:function(e,t){if(this.ignoreNext)return void(this.ignoreNext=!1);if("\\"===e)return void(this.ignoreNext=!0);if(this.state.once(a.States.EXPECT_ASSIGNING)&&"="!==e&&(this.cancelLatest(),this.state.set(a.States.CANCEL_NEXT_TOKEN)),this.state.once(a.States.CANCEL_PREV_TOKEN)&&this.cancelLatest(),this.ignoredUntilNot){if(this.ignoredUntilNot===e)return;delete this.ignoredUntilNot}if(this.consumingString)return void(this.consumingString===e&&delete this.consumingString);if(this.state.has(a.States.PENDING_FOR_VARIABLE)&&s.VariableCharacters.isValid(e)&&(this.state.unset(a.States.PENDING_FOR_VARIABLE),this.state.set(a.States.CONSUMING_VARIABLE)),!this.state.has(a.States.CONSUMING_VARIABLE))return":"===e?this.state.set(a.States.CANCEL_PREV_TOKEN):"="===e?(this.ignoreUntilNot(e),this.state.set(a.States.EXPECT_ASSIGNING)):"'"===e||'"'===e||"`"===e?(this.state.set(a.States.TOKEN_PERSISTED),this.consumeString(e)):void 0;if(s.VariableCharacters.isValid(e)){if(this.consumeVariable(e),t)return this.finalizeVariable()}else{if("("===e)return this.cancelCurrentVariable();s.VariableCharacters.hasStringQuotes(e)?this.consumeVariable(e):this.finalizeVariable()}}},{key:"getVariables",value:function(){return this.variables.filter(function(e){var t=s.VariableCharacters.isValid(e);return t})}}]),e}();t.dig=function(e){for(var t=new o,r=0;r<e.length;r++)t.receive(e[r],r===e.length-1);t.getVariables();return t.variables}}),n("index",["require","exports","Digger"],function(e,t,r){t.dig=r.dig});var i=function(n,i,a,o){var u,l=s(n);if(!t){var c=e.__npm__=e.__npm__||{};i&&(u=c[i])}var f=o?o.split(","):[];if(f.length)for(var h in r)for(var _=0;_<f.length;_++)0===h.indexOf(f[_])&&s(h);for(var E in l)t||a?e[E]=l[E]:null,u?u[l]=l[E]:null};i("index","extract-vars",!0,"")}("undefined"!=typeof exports?exports:this,"undefined"!=typeof exports);